{% extends "template.html" %}

{% block title %}DdbT{{ table_info.id }}: {{ table_info.title }}{% endblock %}

{% block abovebody %}
    <div class="jumbotron">
        <div class="container">
            <h2>
                DdbT{{ table_info.id }}: {{ table_info.title }}
            </h2>
        </div>
    </div>
{% endblock %}

{% block body %}

    <div class="row">
        <div class="col-sm-7">
            <p><i class="glyphicon glyphicon-user"></i> <b>Submitted
                by:</b> {{ table_info.first_name }} {{ table_info.last_name }}</p>

            {% if table_info.owner_id == g.user.id %}
                <a href="{{ url_for('edit_table', id=table_info.id) }}">
                    <div class="btn btn-warning">Edit Table</div>
                </a>
            {% endif %}
        </div>
        <div class="col-sm-1">
        </div>
        <div class="col-sm-4">
            <p><i class="glyphicon glyphicon-calendar"></i> <b>Submitted
                on:</b> {{ table_info.creation_date.strftime('%d-%m-%Y') }}</p>
            <p><i class="glyphicon glyphicon-book"></i> <b>Status:</b>
                {% if table_info.public == True %}
                    Public
                {% else %}
                    Private
                {% endif %}
            </p>
        </div>
    </div>

    <h2>Description</h2>
    {% if table_info.description != None %}
        <p>{{ table_info.description }}</p>
    {% else %}
        <p>No description available.</p>
    {% endif %}

    {% if publications|length > 0 %}
        <h2>Publications ({{publications|length}})</h2>
        <ol>
            {% for p in publications %}
                <li>
                {% if p.doi != None %}
                    <a href="https://doi.org/{{ p.doi }}" target="_blank">
                {% elif p.pubmed != None %}
                    <a href="https://www.ncbi.nlm.nih.gov/pubmed/{{ p.pubmed_id }}" target="_blank">
                {% else %}
                    <a href="#">
                {% endif %}
                     {{ p.publication_title }} </a>
                </li>
            {% endfor %}
        </ol>
    {% endif %}

    <h2>Metabolite Table</h2>
    <table id="metabolite_table" class="table table-striped">

    </table>
{% endblock %}

{% block javascript %}
    <script src="{{ url_for('static', filename='js/tables/view.js') }}"></script>
    <script>
        generate_table("{{ table_info.id }}")
    </script>
{% endblock %}