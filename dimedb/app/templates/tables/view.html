{% extends "template.html" %}

{% block title %}{{ table_info.title }}{% endblock %}

{% block page_title %}
    <h1>{{ table_info.title }}</h1>
{% endblock %}


{% block body %}


    <div class="row">
        <div class="col-sm-6">
            <p><i class="glyphicon glyphicon-user"></i> <b>Author:</b> {{ table_info.first_name }} {{ table_info.last_name }}</p>
            <p><i class="glyphicon glyphicon-paperclip"></i> <b>Status:</b>
            {% if table_info.published == True %}Published{% else %}Private{% endif %}</p>
        </div>
        <div class="col-sm-6" style="text-align: right;">
            <p><i class="glyphicon glyphicon-calendar"></i> <b>Creation Date:</b> {{ table_info.creation_date.strftime('%d-%m-%Y') }}</p>
            <p><i class="glyphicon glyphicon-leaf"></i> <b>Species:</b> {% if table_info.species != "" %}{{ table_info.species }}{% else %}None{% endif %}</p>

        </div>
    </div>

    <h2 class="page-header">Description</h2>
    {% if table_info.description != None %}
        <p>{{ table_info.description }}</p>
    {% else %}
        <p>No description available.</p>
    {% endif %}

    {% if publications|length > 0 %}
        <h2 class="page-header">Publications</h2>
        <ol>
            {% for p in publications %}
                <li>
                {% if p.doi != None %}
                    <a href="https://doi.org/{{ p.doi }}" target="_blank">
                {% elif p.pubmed != None %}
                    <a href="https://www.ncbi.nlm.nih.gov/pubmed/{{ p.pubmed_id }}" target="_blank">
                {% else %}
                    <a href="#">
                {% endif %}
                     {{ p.publication_title }} </a>
                </li>
            {% endfor %}
        </ol>
    {% endif %}

    <h2 class="page-header">Metabolite Table</h2>
    <table id="metabolite_table" class="table table-striped">

    </table>
{% endblock %}

{% block javascript %}
    <script src="{{ url_for('static', filename='js/tables/view.js') }}"></script>
    <script>
        generate_table("{{ table_info.id }}")
    </script>
{% endblock %}