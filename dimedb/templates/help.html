{% extends "template.html" %}

{% block title %}Help{% endblock %}

{% block head %}
    <link href="{{ url_for('static', filename='bower_components/prismjs/themes/prism.css') }}" rel="stylesheet">
{% endblock %}

{% block abovebody %}
    <div class="jumbotron">
        <div class="container">
            <h1>Help Centre</h1>
        </div>
    </div>
{% endblock %}

{% block body %}

    <p>This page contains information about how to interact with DIMEdb’s web application and web service.</p>

    <a name="#faq"><h1 class="page-header">Frequently Asked Questions</h1></a>
    <h2>What databases does DIMEdb use to collate its data from?</h2>

    <p><a href="http://www.hmdb.ca/" target="_blank">HMDB</a>,
        <a href="https://pubchem.ncbi.nlm.nih.gov/" target="_blank">PubChem</a>,
        <a href="https://www.ebi.ac.uk/chebi/" target="_blank">CHEBI</a>, and
        <a href="http://www.genome.jp/kegg/" target="_blank">KEGG</a>.</p>

    <h2>Where can I download DIMEdb?</h2>

    <p>Visit the <a href="{{ url_for('downloads_centre') }}">download centre</a> for more information.</p>

    <h2>How can I cite DIMEdb?</h2>

    <p>Publication pending...</p>

    <h2>How are isotopic distributions calcuated?</h2>

    <p>Distributions are calculated using the open-source pyIDICk python package, <a href="{{ url_for('downloads_centre') }}">available here</a>.</p>

    <h2>Can I use the web service for my own tools?</h2>

    <p>Absolutely! Feel free to take a look at our example Python package <a href="{{ url_for('downloads_centre') }}">dimedbpy</a> for a
    working example of how best to use the web service.</p>

    <a name="#api"><h1 class="page-header">DIMEdb Web Service/API</h1></a>

    <p>DIMEdb features a application programming interface (API) which enables users to extract information from the
        integrated metabolite database freely. The API is built with ease-of-use in mind, providing access to relevant
        metabolite information without the need of downloading the entirety of the database.</p>

    <p>The metabolites collection is available as a RESTful persistent identifier, found here:</p>

    <pre class="language-bash"><code class="language-bash">{{ url }}api/metabolites</code></pre>

    <p>Querying the above URL will return a payload similar to this:</p>

    <pre class="language-javascript"><code class="language-javascript">
{
  "_items": [
    {
      "_updated": "Thu, 01 Jan 1970 00:00:00 GMT",
      "Adducts": {
	...
      },
      "External Sources": {
        ...
      },
      "Physiochemical Properties": {

        ...
      },
      "Taxonomic Properties": {
        ...
      },
      "Pathways": {
        ...
      },
      "_created": "Thu, 01 Jan 1970 00:00:00 GMT",
      "_id": "DOUMFZQKYFQNTF-WUTVXBCWSA-N",
      "_etag": "f150abf5bb4cea99aed46186e25642ea8ca5006d",
      "Identification Information": {
        ...
      }
    }
  ],
  "_meta": {
    "max_results": 50,
    "total": 1,
    "page": 1
  }
}
    </code></pre>

    <div class="alert alert-danger">Note: The <code>_items</code> list contains the requested metabolite information.
        For queries
        that return a large number of results, pagination information can be found inside the <code>_meta</code> field.
    </div>

    <h3>Basic Filtering</h3>

    <p>To return filtered metabolites, you can use both native MongoDB queries, and standard Python conditional
        expressions.
        For example, here we are requesting for all metabolites whose molecular formula is C12H22O11:</p>

    <pre class="language-bash"><code class="language-bash">{{ url }}api/metabolites?where={"Identification Information.Molecular Formula" : “C12H22O11”}</code></pre>

    <p>Additionally, both query methods allow for logical and/or operators:</p>

    <pre class="language-bash"><code class="language-bash">{{ url }}api/metabolites?where={“$or” : [{“Identification Information.Molecular Formula : “C12H22O11”}, {“Physiochemical Properties.Hydrogen Bond Acceptors” : 2}]}</code></pre>

    <h3>Conditional Operators</h3>

    <p>For more advanced searching, you can also use conditional operators. For example,
        if you wanted to return all metabolites with a molecular weight &ge; 360.05 and
        &le; 380.05 g/mol, then you can use the following query.:</p>

    <pre class="language-bash"><code class="language-bash">{{ url }}api/metabolites?where={"Physiochemical Properties.Molecular Weight" : {"$gte" : 360.05, "$lte" : 380.05}}</code></pre>

    <h3>Projections</h3>

    <p>If you would like to create a dynamic view of all returned metabolites, DIMEdb supports the use of a projection.
        Projections act like conditional queries, where the request dictates what fields should be returned for a given
        query. For example if you’re only interested in returning the names of matching metabolites, then you can use
        the following query:</p>

    <pre class="language-bash"><code class="language-bash">{{ url }}api/metabolites?where={"Identification Information.Molecular Formula" : “C12H22O11”}&projection={“Identification Information.Name” : 1}</code></pre>


    <h2>Data Documentation</h2>

    <table class="table table-striped">
        <tr>
            <th width="20%">Property Name</th>
            <th width="45%">Property Description</th>
            <th>Data Type</th>
            <th width="25%">Data Source</th>
        </tr>
        <tr>
            <td>_id</td>
            <td>Compiled InChIKey</td>
            <td>String</td>
            <td>Generated from InChI.</td>
        </tr>
        <tr>
            <td colspan="4">
                <span class="text_bold">Identification Information</span>
            </td>
        </tr>
        <tr>
            <td>Name</td>
            <td>Common name</td>
            <td>String</td>
            <td>PubChem, HMDB, and CheBI.</td>
        </tr>
        <tr>
            <td>Synonyms</td>
            <td>Alternative names</td>
            <td>List</td>
            <td>PubChem, HMDB, and CheBI.</td>
        </tr>
        <tr>
            <td>IUPAC Name</td>
            <td>Standard chemical name</td>
            <td>String</td>
            <td>PubChem, HMDB, and CheBI.</td>
        </tr>
        <tr>
            <td>Systematic Name</td>
            <td>Systematically generated name</td>
            <td>String</td>
            <td>Generated from InChI.</td>
        </tr>
        <tr>
            <td>SMILES</td>
            <td>Isometric SMILES</td>
            <td>String</td>
            <td>Generated from InChI.</td>
        </tr>
        <tr>
            <td>Molecular Formula</td>
            <td>Textual description of elemental composition</td>
            <td>String</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>InChI</td>
            <td>Unique InChI identifier</td>
            <td>String</td>
            <td>PubChem, HMDB, and CheBI.</td>
        </tr>
        <tr>
            <td colspan="4">
                <span class="text_bold">Physiochemical Properties</span>
            </td>
        </tr>
        <tr>
            <td>clogP</td>
            <td></td>
            <td>Float</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>Polar Surface Area</td>
            <td></td>
            <td>Float</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>Secondary Amines</td>
            <td></td>
            <td>Integer</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>Ether Oxygens</td>
            <td></td>
            <td>Integer</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>Hydroxy Groups</td>
            <td></td>
            <td>Integer</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>Heavy Atoms</td>
            <td></td>
            <td>Integer</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>Rings</td>
            <td></td>
            <td>Integer</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>Hydrogen Bond Acceptors</td>
            <td></td>
            <td>Integer</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>Hydrogen Bond Donors</td>
            <td></td>
            <td>Integer</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>Aromotic Rings</td>
            <td></td>
            <td>Integer</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>Formal Charge</td>
            <td></td>
            <td>Integer</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>MR Values</td>
            <td></td>
            <td>Float</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>Fraction of SP3 Carbon</td>
            <td></td>
            <td>Float</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>Carboxylic Acids</td>
            <td></td>
            <td>Integer</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>Molecular Weight</td>
            <td></td>
            <td>Float</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td>Rotatable Bonds</td>
            <td></td>
            <td>Integer</td>
            <td>Generated from SMILES.</td>
        </tr>
        <tr>
            <td colspan="4">
                <span class="text_bold">External Sources</span>
            </td>
        </tr>
        <tr>
            <td>ChEBI ID</td>
            <td></td>
            <td>String</td>
            <td>BridgeDb, or source.</td>
        </tr>
        <tr>
            <td>HMDB Accession</td>
            <td></td>
            <td>String</td>
            <td>BridgeDb, or source.</td>
        </tr>
        <tr>
            <td>PubChem ID</td>
            <td></td>
            <td>String</td>
            <td>BridgeDb, or source.</td>
        </tr>
        <tr>
            <td>KEGG Compound</td>
            <td></td>
            <td>String</td>
            <td>BridgeDb, or source.</td>
        </tr>
        <tr>
            <td>CAS</td>
            <td></td>
            <td>String</td>
            <td>BridgeDb, or source.</td>
        </tr>
        <tr>
            <td>Wikidata</td>
            <td></td>
            <td>String</td>
            <td>BridgeDb, or source.</td>
        </tr>
        <tr>
            <td>Chemspider</td>
            <td></td>
            <td>String</td>
            <td>BridgeDb, or source.</td>
        </tr>
        <tr>
            <td colspan="4">
                <span class="text_bold">Pathways</span>
            </td>
        </tr>
        <tr>
            <td>SMPDB</td>
            <td></td>
            <td>List</td>
            <td>HMDB.</td>
        </tr>
        <tr>
            <td>KEGG</td>
            <td></td>
            <td>List</td>
            <td>KEGG.</td>
        </tr>
        <tr>
            <td colspan="4">
                <span class="text_bold">Adducts (Positive/Negative/Neutral)</span>
            </td>
        </tr>
        <tr>
            <td>Accurate Mass</td>
            <td></td>
            <td>Float</td>
            <td>pyIDICk.</td>
        </tr>
        <tr>
            <td>Type</td>
            <td></td>
            <td>Float</td>
            <td>pyIDICk.</td>
        </tr>
        <tr>
            <td>Isotopic Distribution</td>
            <td></td>
            <td>List</td>
            <td>pyIDICk.</td>
        </tr>
    </table>

{% endblock %}

{% block javascript %}
    <script src="{{ url_for('static', filename='bower_components/prismjs/prism.js') }}"></script>

{% endblock %}